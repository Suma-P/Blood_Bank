{% extends 'base.html' %}
{% load static %}
{% block title %}
   Save Life !!!
{% endblock %}
{% block content %}

<!--  ########################################## Slide ###############################################  -->

<div class="slider-detail" xmlns="http://www.w3.org/1999/html">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3" class="active"></li>
        </ol>

        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="{% static 'img/slider/slide-35.jpg' %}" width="1115px" height="500px" alt="First slide">
                <div class="carousel-caption d-none d-md-block">
                    <h4 class=" bounceInDown" style="color:white">Donate Blood & Save a Life</h4>
                    <p class=" bounceInLeft">It’s never too late to save a life<br>
                     Hospitals and other establishments continue to create campaigns and motivators aimed at increasing the donor pool</p>
                    <div class=" vbh">
                        <div class="text-center">
                            {% if user.is_authenticated %}
<!--                            <a href="#Donate Now" class="btn btn-danger  bounceInUp text-center">Donate Now</a>-->
                            {% else %}
                            <a class="btn btn-danger" href="blood/login"></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img class="d-block w-100" src="{% static 'img/slider/slide-12.jpeg' %}" width="1115px" height="500px" alt="Second slide">
                <div class="carousel-caption vdg-cur d-none d-md-block">
                    <h4 class="bounceInDown" style="color:white">Donate Blood & Save a Life</h4>
                    <p class="bounceInLeft">Millions Of People Die Because Of Lack Of Blood<br>
                        If a person’s blood levels fall due to an accident or illness, or if their blood is not functioning properly, there will not be enough oxygen or other nutrients to maintain their vital organs.</p>
                    <div class=" vbh">
                        <div class="text-center">
                            {% if user.is_authenticated %}
<!--                            <a href="Donate Now" class="btn btn-danger  bounceInUp text-center">Donate Now</a>-->
                            {% else %}
                            <a class="btn btn-danger" href="blood/login"></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="carousel-item">
                <img class="d-block w-100" src="{% static 'img/slider/slide-15.jpeg' %}" width="1115px" height="500px" alt="Third slide">
                <div class="carousel-caption vdg-cur d-none d-md-block">
                    <h4 class=" bounceInDown" style="color:white">Donate Blood & Save a Life</h4>
                    <p class=" bounceInLeft">Donating Blood Causes More Benefits Than Harm <br>
                        People who have recovered from COVID-19 may be able to help others with the disease by donating blood plasma, according to the Food and Drug Administration (FDA)</p>
                    <div class="vbh">
                        <div class="text-center">
                            {% if user.is_authenticated %}
<!--                            <a href="#Donate Now" class="btn btn-danger  bounceInUp text-center">Donate Now</a>-->
                            {% else %}
                            <a class="btn btn-danger" href="blood/login"></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>

        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>

<!--  ########################################## Journal begins here ###############################################  -->

<div class="container">
    <div class="row my_row_class">
        <h2 class="title2"><strong><u>Donation Process</u></strong></h2>
        <div class="content col-12 col-sm-12 col-md-12 col-lg-6 text-justify">
            <h4 class="my_content_title"><strong>Registration</strong></h4>
            <p><i>When you arrive at the blood bank or blood drive, you’ll sign in for your appointment and show your ID. Then you’ll complete paperwork that includes general information like your name, address, and phone number.</i></p>
            <img class="col-md-12" src="{% static 'img/image.jpeg' %}" width="300px" height="250px"><br>
            <h4 class="my_content_title"><strong>Health screening</strong></h4>
            <p><i>Before you donate, an employee from the blood bank will ask you some confidential questions about your health and lifestyle. You’ll also get a short health exam or “mini-physical.” An employee will take your pulse, blood pressure, and temperature, and take a small amount of blood for testing.</i></p>
            <img class="col-md-12" src="{% static 'img/screening.jpg' %}" width="300px" height="250px"><br>

            <h4 class="my_content_title"><strong>Donation</strong></h4>
            <p><i> When it’s time to donate, here’s what will happen: You’ll go into a donor room where you’ll lie down on a cot. A phlebotomist (an employee who draws blood) will clean your arm and insert a new, sterile needle into your vein. This takes just a few seconds, and it can feel like a quick pinch. You’ll donate about 1 pint (one unit) of blood. The process should take less than 10 minutes. But if you’re donating platelets, red cells, or plasma by apheresis, the process can take much longer: up to 2 hours. When you’re done, you’ll raise your donation arm and put a little bit of pressure on it, which helps your blood clot. Then they’ll put an adhesive strip on your arm.</i></p>
            <img class="col-md-12" src="{% static 'img/g2.jpg' %}" width="300px" height="250px"><br>
        </div>

        <div class="content col-12 col-sm-12 col-md-12 col-lg-6 text-justify">
            <h4 class="my_content_title"><strong>Refreshment</strong></h4>
            <p><i> After you’re finished, you’ll be given snacks and a drink to help your body get back to normal since you lost some fluids. You’ll want to sit and relax for at least 10 minutes to restore your strength and get some energy back before you leave.</i></p>
            <img class="col-md-12" src="{% static 'img/refreshment.jpg' %}" width="300px" height="250px"><br>

            <h4 class="my_content_title"><strong>Blood Donation Tips</strong></h4>
            <p><i>If you plan to give blood, follow these steps: Drink plenty of water. Staying hydrated makes it easier to find your veins and prevents you from becoming light-headed after donating. Eat well beforehand,don’t skip breakfast, and be sure to eat snacks offered to you. Exercise before donating blood, not afterward. It’s OK to go to the gym before you donate blood but not so wise afterward. Take iron tablets. The American Red Cross recommends that individuals who donate blood frequently take an iron supplement or a multivitamin with iron.</i></p>
            <img class="col-md-12" src="{% static 'img/gallery-1/67.jpg' %}" width="300px" height="250px"><br>

            <h4 class="my_content_title"><strong>Side Effects After Donating Blood</strong></h4>
            <p><i>People may experience some minor bruising due to blood under the surface of the skin.
                This is a normal reaction and should go away by itself within 1 week Trusted Source.
                They may also experience some pain or tenderness at the site of the needle insertion, and possibly some minor swelling.
                According to Bloodworks Northwest, a nonprofit organization, applying a compress can help to relieve pain and swelling.
                Bloodworks suggest applying a cold compress four times a day for 20 minutes for the first 2 days.</i></p>
            <p><i> Afterward, a person can apply a warm compress four times a day for 20 minutes.
                Some of them experience minor bleeding from the needle site after donating blood.
                To prevent this, they can leave their bandage on for a minimum of 4 hours after a donation.
                If the site begins to bleed again, they can apply pressure for 2–5 minutes, and keep the bandage in place for a further 4 hours.
                A compress may ease any tenderness until the pain goes away. If people have severe or long lasting pain, they should contact their doctor.
                If symptoms do not improve, people can contact their doctor.</i></p>
            </div>
        </div>
        <br><br>

<!--  ########################################## Donor Form ###############################################  -->

    <div class="row justify-content-center">
        <div class="col-md-6 text-center mb-5 ">
            <button type="submit" class="form-control btn btn-primary" onclick="showtime()">Donate Now</button><br><br>
                <form method="post" action="donate" id="donorForm" data-branches-url="{% url 'blood:ajax_load_branches' %}" style="display:none;" >
                    {% csrf_token %}
                    {{ form.as_p }}
                    <button type="button" id="submit" class="form-control btn btn-success" onclick="openPopup()">Submit</button>
                    <div class="popup" id="popup">
                        <img src="{% static 'img/tick1.png' %}">
                        <h2>Thank You!</h2>
                        <p>Your details has been successfully submitted. Thanks!</p>
                        <button class="form-control">
                            <a href="{% url 'blood:index' %}" style="color:white;">OK</a></button>
                    </div>
                </form>
             </div>
            <script>

<!--  ########################################## Show Time  ###############################################  -->

            function showtime() {

            var x = document.getElementById("donorForm");
            if (x.style.display === "none") {
                    x.style.display = "block";
            }
            else {
                    x.style.display = "none";
                  }
            }

<!--  ########################################## PopUp ###############################################  -->


           let popup = document.getElementById("popup");
           function openPopup(){
           popup.classList.add("open-popup");
           }
           function closePopup(){
           popup.classList.remove("open-popup");
           }

<!--  ########################################## District and Branch ###############################################  -->


           $("#id_district").change(function () {
           const url = $("#donorForm").attr("data-branch-url");
           const districtId = $(this).val();

           $.ajax({
                url: url,
                data: {
                    'district_id': districtId
                },
                success: function (data) {
                    $("#id_branch").html(data);
                    /*
                    let html_data = '<option value="">---------</option>';
                    data.forEach(function (branch) {
                        html_data += `<option value="${branch.id}">${branch.name}</option>`
                    });
                    console.log(html_data);
                    $("#id_branch").html(html_data);
                    */
                }
            });

        });

       </script>
      </div>
</div>
{% endblock %}
